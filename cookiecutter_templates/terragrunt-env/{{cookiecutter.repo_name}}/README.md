# {{ cookiecutter.repo_name }}

Starter Terragrunt environment for CAVE on GCP.

## Layout
- environments/{{ cookiecutter.org }}/root.hcl
- environments/{{ cookiecutter.org }}/static/terragrunt.hcl  # shared infra (VPC, SQL, DNS, Redis)
- environments/{{ cookiecutter.org }}/{{ cookiecutter.environment }}/terragrunt.hcl  # cluster
- environments/{{ cookiecutter.org }}/scripts/terragrunt_import_sql.sh
- environments/{{ cookiecutter.org }}/{{ cookiecutter.environment }}/helmfile/  # generated by Terraform

Notes:
- "environment" (e.g., api, staging, prod) is the env folder name.
- cluster_name controls the cluster_prefix only; it does not create directories.
- Helm values use defaults+overrides: *.defaults.yaml are generated, user *.yaml overrides are optional.

## Usage
- Set your state bucket in environments/{{ cookiecutter.org }}/root.hcl (bucket and helm_terraform_state_url).
- Provision infra:
  - cd environments/{{ cookiecutter.org }}/static && terragrunt init && terragrunt apply
- Provision cluster:
  - cd ../{{ cookiecutter.environment }} && terragrunt init && terragrunt apply
- Get kube creds, then deploy apps:
  - cd helmfile && cp helmfile.yaml.example helmfile.yaml && helmfile apply

Follow QUICKSTART in the root repo for full steps.
