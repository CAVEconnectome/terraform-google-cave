# mycave-repo

Starter Terragrunt environment for CAVE on GCP.

## Layout
- environments/myorg/root.hcl
- environments/myorg/static/terragrunt.hcl  # shared infra (VPC, SQL, DNS, Redis)
- environments/myorg/api/terragrunt.hcl  # cluster
- environments/myorg/scripts/terragrunt_import_sql.sh
- environments/myorg/api/helmfile/  # generated by Terraform

Notes:
- "environment" (e.g., api, staging, prod) is the env folder name.
- cluster_name controls the cluster_prefix only; it does not create directories.
- Helm values use defaults+overrides: *.defaults.yaml are generated, user *.yaml overrides are optional.

## Usage
- Set your state bucket in environments/myorg/root.hcl (bucket and helm_terraform_state_url).
- Provision infra:
  - cd environments/myorg/static && terragrunt init && terragrunt apply
- Provision cluster:
  - cd ../api && terragrunt init && terragrunt apply
- Get kube creds, then deploy apps:
  - cd helmfile && cp helmfile.yaml.example helmfile.yaml && helmfile apply

Follow QUICKSTART in the root repo for full steps.
